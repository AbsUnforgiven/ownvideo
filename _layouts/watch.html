<!DOCTYPE html>
<html lang="en">
  <head>
    {% include head.html %}
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "VideoObject",
      "name": "{{ page.title }}",
      "description": "{{ content | strip_html | strip_newlines }}",
      "thumbnailUrl": "{{ site.video-baseurl }}{{ page.video-id }}-thumb.jpg",
      "uploadDate": "{{ page.date | date_to_xmlschema }}",
      "contentUrl": "{{ site.video-baseurl }}{{ page.video-id }}.mp4"
    }
    </script>
  </head>
  <body>
      <div class="outer">
        {% include header.html %}
        <div class="pagewrap">
            <main>
                {% include video-player.html %}
                <div class="video-card video-header">
                    <h1 class="video-title">{{ page.title }}</h1>
                    <div class="video-options-wrap">
                        <div class="channel-wrap">
                            <img class="channel-logo" src="https://placeholdit.imgix.net/~text?txtsize=25&txt=50&w=50&h=50"></img>
                            <span class="channel-name">{{ site.author.name }}</span><br />
                            <button>Subscribe</button>
                        </div>
                        <div class="share-embed-wrap">
                            <div class="share-wrap">
                                <span class="sharethis">Share this video: </span>
                                <ul class="sharebuttons">
                                        <li class="share-item">
                                            <a class="share-link ico-facebook" onclick="javascript:window.open(this.href,
                                  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=600');return false;" rel="nofollow" target="_blank"></a>
                                        </li>
                                        <li class="share-item">
                                            <a class="share-link ico-twitter" onclick="javascript:window.open(this.href,
                                  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=600');return false;" rel="nofollow" target="_blank"></a>
                                        </li>
                                        <li class="share-item">
                                            <a class="share-link ico-google" onclick="javascript:window.open(this.href,
                                  '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=600');return false;" rel="nofollow" target="_blank"></a>
                                        </li>
                                </ul>
                            </div>
                            {% if site.enable-video-embeds %}
                                or <a class="get-embed" href="javascript:void(0);">Embed</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="video-card video-details">
                    <span class="card-title publish-date">Published on
                        <time datetime="{{ page.date | date_to_xmlschema }}">
                            {% assign d = page.date | date: "%-d" %} 
                            {% assign m = page.date | date: "%B" %} 

                            {% case m %}
                              {% when 'April' or 'May' or 'June' or 'July' %}{{ m }}
                              {% when 'September' %}Sept
                              {% else %}{{ page.date | date: "%b" }}
                            {% endcase %}
                              {{ d }},
                            {{ page.date | date: "%Y" }}
                       </time>
                    </span>
                    <div class="video-description">
                        {{ content }}
                    </div>
                </div>
            </main>
            <div class="sidebar">
                {% for category in page.categories %}
                    <div class="video-card next-videos" data-category-name="{{ category }}">
                        <span class="card-title next-videos-title">Up next in "<span class="category-title">{{ category }}</span>"</span>
                        {% assign num_posts = 0 %}
                        {% assign posts = site.categories[category] %}
                        {% for post in posts %}
                            {% if post.url == page.url %}
                                {% assign curr_page_idx = forloop.index %}
                                {% for num in (1..site.up-next-count) %}
                                    {% assign curr_page = posts[curr_page_idx] %}
                                    {% unless curr_page %}{% break %}{% endunless %}
                                    <div class="suggested-vid-wrap"><a href="{{ curr_page.url }}"><img class="vid-thumbnail" src="https://placeholdit.imgix.net/~text?txtsize=33&txt=120%C3%9768&w=120&h=68"></img></a><a class="vid-link" href="{{ curr_page.url }}"><span class="vid-thumbnail-title">{{ curr_page.title }}</span></a></div>
                                    {% assign curr_page_idx = curr_page_idx | plus:1 %}
                                    {% assign num_posts = num_posts | plus:1 %}
                                {% endfor %}
                                {% break %}
                            {% endif %}
                        {% endfor %}
                        <span class="meta-posts-count">{{ num_posts }}</span>
                    </div>
                {% endfor %}
                <div class="video-card playlists">
                    <span class="card-title playlists-title">Playlists</span>
                    {% for category in page.categories %}
                        <div class="suggested-vid-wrap"><img class="vid-thumbnail" src="https://placeholdit.imgix.net/~text?txtsize=33&txt=120%C3%9768&w=120&h=68"></img><span class="vid-thumbnail-title category-title">{{ category }}</span></div>
                    {% endfor %}
                </div>
            </div>
            {% if site.disqus-shortname %}
                <div class="video-card disqus-container">
                    <div id="disqus_thread"></div>
                    <script>
                    var disqus_config = function () {
                        this.page.url = "{{ site.url }}{{ page.url | remove_first: '/'}}";
                        this.page.identifier = "{{ page.video-id }}";
                    };
                    
                    (function() { // DON'T EDIT BELOW THIS LINE
                        var d = document, s = d.createElement('script');

                        s.src = '//{{ site.disqus-shortname }}.disqus.com/embed.js';

                        s.setAttribute('data-timestamp', +new Date());
                        (d.head || d.body).appendChild(s);
                    })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                </div>
            {% endif %}
        </div>
        {% include footer.html %}
    </div>
    <script src="{{ site.baseurl }}js/watch.js"></script>
    <script>
        /* Initialize embed button */

        var embed_buttons = document.getElementsByClassName("get-embed");

        for (var i = 0; i < embed_buttons.length; i++) {
            var btn = embed_buttons[i];
            btn.onclick = function() {
                PopupCenter("{{ site.baseurl }}get-embed/?id={{ page.video-id }}", "Video Embed", 300, 200);
            }
        }
    </script>
  </body>
</html>
